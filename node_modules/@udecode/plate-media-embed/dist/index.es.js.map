{"version":3,"file":"index.es.js","sources":["../src/defaults.ts","../src/getMediaEmbedDeserialize.ts","../src/createMediaEmbedPlugin.ts","../src/transforms/insertMediaEmbed.ts"],"sourcesContent":["export const ELEMENT_MEDIA_EMBED = 'media_embed';\n","import { getNodeDeserializer } from '@udecode/plate-common';\nimport {\n  Deserialize,\n  getPlatePluginOptions,\n  getSlateClass,\n} from '@udecode/plate-core';\nimport { ELEMENT_MEDIA_EMBED } from './defaults';\n\nexport const getMediaEmbedDeserialize = (\n  pluginKey = ELEMENT_MEDIA_EMBED\n): Deserialize => (editor) => {\n  const options = getPlatePluginOptions(editor, pluginKey);\n\n  return {\n    element: getNodeDeserializer({\n      type: options.type,\n      getNode: (el: HTMLElement) => {\n        const url = el.getAttribute('src');\n        if (url) {\n          return {\n            type: options.type,\n            url,\n          };\n        }\n      },\n      rules: [\n        { nodeNames: 'IFRAME' },\n        { className: getSlateClass(options.type) },\n      ],\n      ...options.deserialize,\n    }),\n  };\n};\n","import {\n  getPlatePluginTypes,\n  getRenderElement,\n  PlatePlugin,\n} from '@udecode/plate-core';\nimport { ELEMENT_MEDIA_EMBED } from './defaults';\nimport { getMediaEmbedDeserialize } from './getMediaEmbedDeserialize';\n\n/**\n * Enables support for embeddable media such as YouTube\n * or Vimeo videos, Instagram posts and tweets or Google Maps.\n */\nexport const createMediaEmbedPlugin = ({\n  pluginKey = ELEMENT_MEDIA_EMBED,\n}: {\n  pluginKey?: string;\n} = {}): PlatePlugin => ({\n  pluginKeys: pluginKey,\n  renderElement: getRenderElement(pluginKey),\n  deserialize: getMediaEmbedDeserialize(pluginKey),\n  voidTypes: getPlatePluginTypes(pluginKey),\n});\n","import { getParent, insertNodes } from '@udecode/plate-common';\nimport { PlateEditor, PlatePluginKey, TElement } from '@udecode/plate-core';\nimport { ELEMENT_MEDIA_EMBED } from '../defaults';\nimport { MediaEmbedNodeData } from '../types';\n\nexport const insertMediaEmbed = (\n  editor: PlateEditor,\n  {\n    url = '',\n    pluginKey = ELEMENT_MEDIA_EMBED,\n  }: Partial<MediaEmbedNodeData> & PlatePluginKey\n): void => {\n  if (!editor.selection) return;\n  const selectionParentEntry = getParent(editor, editor.selection);\n  if (!selectionParentEntry) return;\n  const [, path] = selectionParentEntry;\n  insertNodes<TElement>(\n    editor,\n    {\n      type: pluginKey,\n      url,\n      children: [{ text: '' }],\n    },\n    { at: path }\n  );\n};\n"],"names":["ELEMENT_MEDIA_EMBED","getMediaEmbedDeserialize","pluginKey","editor","options","getPlatePluginOptions","element","getNodeDeserializer","type","getNode","el","url","getAttribute","rules","nodeNames","className","getSlateClass","deserialize","createMediaEmbedPlugin","pluginKeys","renderElement","getRenderElement","voidTypes","getPlatePluginTypes","insertMediaEmbed","selection","selectionParentEntry","getParent","path","insertNodes","children","text","at"],"mappings":";;;MAAaA,mBAAmB,GAAG;;MCQtBC,wBAAwB,GAAG,CACtCC,SAAS,GAAGF,mBAD0B,KAErBG,MAAD,IAAY;AAC5B,QAAMC,OAAO,GAAGC,qBAAqB,CAACF,MAAD,EAASD,SAAT,CAArC;AAEA,SAAO;AACLI,IAAAA,OAAO,EAAEC,mBAAmB,CAAC;AAC3BC,MAAAA,IAAI,EAAEJ,OAAO,CAACI,IADa;AAE3BC,MAAAA,OAAO,EAAGC,EAAD,IAAqB;AAC5B,cAAMC,GAAG,GAAGD,EAAE,CAACE,YAAH,CAAgB,KAAhB,CAAZ;;AACA,YAAID,GAAJ,EAAS;AACP,iBAAO;AACLH,YAAAA,IAAI,EAAEJ,OAAO,CAACI,IADT;AAELG,YAAAA;AAFK,WAAP;AAID;AACF,OAV0B;AAW3BE,MAAAA,KAAK,EAAE,CACL;AAAEC,QAAAA,SAAS,EAAE;AAAb,OADK,EAEL;AAAEC,QAAAA,SAAS,EAAEC,aAAa,CAACZ,OAAO,CAACI,IAAT;AAA1B,OAFK,CAXoB;AAe3B,SAAGJ,OAAO,CAACa;AAfgB,KAAD;AADvB,GAAP;AAmBD;;ACxBD;AACA;AACA;AACA;;MACaC,sBAAsB,GAAG,CAAC;AACrChB,EAAAA,SAAS,GAAGF;AADyB,IAInC,EAJkC,MAIb;AACvBmB,EAAAA,UAAU,EAAEjB,SADW;AAEvBkB,EAAAA,aAAa,EAAEC,gBAAgB,CAACnB,SAAD,CAFR;AAGvBe,EAAAA,WAAW,EAAEhB,wBAAwB,CAACC,SAAD,CAHd;AAIvBoB,EAAAA,SAAS,EAAEC,mBAAmB,CAACrB,SAAD;AAJP,CAJa;;MCPzBsB,gBAAgB,GAAG,CAC9BrB,MAD8B,EAE9B;AACEQ,EAAAA,GAAG,GAAG,EADR;AAEET,EAAAA,SAAS,GAAGF;AAFd,CAF8B,KAMrB;AACT,MAAI,CAACG,MAAM,CAACsB,SAAZ,EAAuB;AACvB,QAAMC,oBAAoB,GAAGC,SAAS,CAACxB,MAAD,EAASA,MAAM,CAACsB,SAAhB,CAAtC;AACA,MAAI,CAACC,oBAAL,EAA2B;AAC3B,QAAM,GAAGE,IAAH,IAAWF,oBAAjB;AACAG,EAAAA,WAAW,CACT1B,MADS,EAET;AACEK,IAAAA,IAAI,EAAEN,SADR;AAEES,IAAAA,GAFF;AAGEmB,IAAAA,QAAQ,EAAE,CAAC;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAD;AAHZ,GAFS,EAOT;AAAEC,IAAAA,EAAE,EAAEJ;AAAN,GAPS,CAAX;AASD;;;;"}